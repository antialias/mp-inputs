include ./mixins.jade

- const selectedMath = $helpers.getActiveClauseProperty('math');
- const selectedResourceType = $helpers.getActiveClauseProperty('resourceType');
- const selectedValue = $helpers.getActiveClauseProperty('value');
- const selectedValueName = selectedValue && selectedValue.name;

.show-pane-content
  ul.column.toggle.math
    for math in $component.constants.mathChoices
      li(
        class={selected: math === selectedMath}
        onclick=() => $helpers.updateStageClause({math})
      )= util.capitalize(math)
  ul.column.toggle.resource-type
    for resourceType in $component.resourceTypeChoices
      li(
        class={selected: resourceType === selectedResourceType}
        onclick=() => $helpers.updateStageClause({resourceType})
      )= util.capitalize(resourceType)
  ul.column.resource-value

    if $helpers.showResource('events', selectedResourceType)
      li.resource-title Events
      for value in $component.eventChoices
        if $helpers.matchesSearch(util.renameEvent(value.name))
          li(
            class={selected: value.name === selectedValueName, custom: !!value.custom}
            onclick=() => $helpers.updateStageClause({value}, true)
          )
            = util.renameEvent(value.name)
            button.next-arrow(onclick=ev => $helpers.onArrowClick(ev, value)) â€º

    if $helpers.showResource('properties', selectedResourceType)
      li.resource-title Event properties
      for property in topEventProperties
        +property-entry(property, property.name === selectedValueName)
      li.resource-title People properties
      for property in topPeopleProperties
        +property-entry(property, property.name === selectedValueName)
