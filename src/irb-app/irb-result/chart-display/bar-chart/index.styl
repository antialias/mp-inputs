@import "../../../../stylesheets/common"

bar-height = 22px
bar-bottom = 8px
vertical-lines = 1px dotted border-gray

.bar-chart
  table
    width 100%

    thead
      border-bottom 1px solid border-gray
      position relative
      z-index 1

      tr, th
        display block
        padding 0

    thead, tbody
      display block

    tbody
      min-height 300px

      tr
        &:not(:last-child)
          border-bottom 1px solid border-gray
        &:nth-child(even)
          background-color grey-50

    th, td
      white-space nowrap

    th
      text-align left
      padding 8px

    tr:first-child td
      border-top-color transparent

    tr:last-child td
      border-bottom-color transparent

      &:after
        border-right vertical-lines
        content ''
        cursor default
        display block
        height 100vh
        left 0
        position absolute
        top 100%
        width 100%

      .grid-line
        &:after
          border-right vertical-lines
          content ''
          display block
          height 100vh
          left 0
          position absolute
          top 100%
          width 100%

    td
      border 1px dotted border-gray
      border-bottom-color border-gray
      border-right vertical-lines
      border-top none
      color grey-500
      font-size 12px
      padding 12px
      padding-top 20px
      text-align right
      vertical-align top

      &:first-child
        border-left none

      &:not(:last-child)
        width 1%

      &:last-child
        border-right none
        text-align left

      ul.stacked
        display flex

      li
        white-space nowrap

        &:not(:last-child)
          margin-bottom 7px

      &.chart-header
        max-width 160px
        cursor pointer

        .chart-header-text
          overflow hidden
          text-overflow ellipsis

        li
          line-height bar-height
          height bar-height
          margin-bottom bar-bottom
          overflow hidden
          text-overflow ellipsis

      &.chart-data
        border none
        padding 20px 20px 0 0
        position relative

        .chart-grid
          display flex
          height 100%
          left 0
          position absolute
          top 0
          width 100%

          .grid-line
            border-right vertical-lines
            flex-grow 1
            height 100%
            position relative

            &:last-child
              border 0 none

        ul:not(.stacked) li
          display flex
          width 100%

        li
          height bar-height
          margin-bottom bar-bottom
          min-width 1px
          position relative
          text-align right
          transition width .3s
          user-select none


          .bar-color
            background mp-blue
            cursor pointer
            position relative
            height 100%
            transition width .3s
            width 100%
            z-index 0

          .label-wrapper
            height bar-height
            overflow hidden
            pointer-events none
            position absolute
            top 0
            width 100%

            .bar-text-nudger
              float left
              height 100%
              width 1px

            .label
              color white
              float right
              font-size 12px
              line-height 20.5px
              padding 1px 8px
              position relative
              z-index 1

            &.outside-label
              cursor default
              position relative

              .outside-label-wrapper
                height 100%
                left 0
                position absolute
                top -100%
                width 100%

              .label
                color grey-700
                float left

                &.not-multi-color
                  color mp-blue

  .chart-header
    position relative

    .hover-label
      width auto

      .content
        left 10px
        top -100px

  .hover-label
    pointer-events none
    position absolute
    transition left .1s
    width 100%

    .content
      background-color #fff
      border-radius 4px
      box-shadow 0 1px 10px 0 rgba(9, 42, 62, 0.18)
      font 14px font-helvetica-neue
      overflow hidden
      position absolute
      text-align center
      top -60px
      z-index 3

      .results
        div
          line-height 15px
          padding 0 5px

  .sort-icon
    cursor pointer
    display inline-block
    height 100%
    width 36px
    svg-icon-style(grey-500, blue-300, pos-left: 7px, pos-top: 2px)

    &.sort-axis
      svg-icon-style(grey-500, blue-300, pos-left: 7px, pos-top: 7px)

    &.sort-bar-header
      margin-top 10px
