@import "../../../stylesheets/common"

.bar-chart
  table
    width 100%

    thead
      border-top 1px solid lighten(background-gray, 25%)
      border-bottom 1px solid lighten(background-gray, 25%)
      position relative
      z-index 1

      tr, th
        display block
        padding 0

      irb-bar-chart-header
        .bar-chart-container
          display flex

          &.loading
            visibility hidden

        .bar-chart-header, .bar-chart-axis
          cursor pointer
          display flex
          &:hover .sort-icon::before
            opacity 1

          .text
            align-items center
            line-height 40px

        .bar-chart-header
          border-right 1px solid lighten(background-gray, 50%)

          .text
            padding-left 15px

        .bar-chart-axis
          justify-content flex-end

          .axis-title
            display flex
            justify-content center
            width 50%

            .text
              margin-left 36px

          .max-value
            color medium-gray
            display flex
            justify-content flex-end
            width 25%

            .text
              padding 0 15px

    thead, tbody
      display block

    tbody
      min-height 300px

    th, td
      white-space nowrap

    th
      text-align left
      padding 8px

    tr:first-child td
      border-top-color transparent

    tr:last-child td
      border-bottom-color transparent

    td
      border 2px solid lighten(background-gray, 50%)
      border-bottom-color lighten(background-gray, 75%)
      color medium-gray
      font-size 12px
      padding 12px
      text-align right
      vertical-align top

      &:first-child
        border-left none

      &:not(:last-child)
        width 1%

      &:last-child
        border-right none
        text-align left

      ul.stacked
        display flex

      li
        white-space nowrap
        transition width .5s

        &:not(:last-child)
          margin-bottom 7px

      &.chart-header
        max-width 160px

        .chart-header-text
          overflow hidden
          text-overflow ellipsis

        li
          overflow hidden
          text-overflow ellipsis

      &.sort-holder
        border none
        padding 0
        position relative
        .sort-controls
          background-color #fff
          border-radius 5px
          box-shadow 2px 3px 10px -4px black
          line-height 0
          opacity 0
          position absolute
          top -65px
          transform scale(0)
          transition opacity 0.1s
          z-index 1
          .sort-icon
            height 30px
            &:not(:last-child)
              border-right 1px solid background-gray
            &::before
              height 10px
              margin-top 10px
            &:hover::before
              background blue-300
        &.active-sort-panel .sort-controls
          left 50%
          opacity 1
          transform translate(-50%)

      &.chart-data
        border none
        padding 0
        padding-top 12px
        position relative

        .chart-grid
          display flex
          height 100%
          left 0
          opacity .3
          position absolute
          top 0
          width 100%

          .grid-line
            border-right 2px solid background-gray
            flex-grow 1
            height 100%

            &:last-child
              border 0 none

        li
          cursor pointer
          height 20px
          margin-bottom 2px
          min-width 1px
          position relative
          text-align right
          user-select none

          .bar-color
            background dark-gray
            height 100%
            position absolute
            width 100%
            z-index 0

            &.bar-color-1
              background dark-gray

            &.bar-color-2
              background lighten(dark-gray, 10%)

            &.bar-color-3
              background lighten(dark-gray, 20%)

            &.bar-color-4
              background lighten(dark-gray, 30%)

            &.bar-color-5
              background lighten(dark-gray, 40%)

            &.bar-color-6
              background lighten(dark-gray, 50%)

            &.bar-color-7
              background lighten(dark-gray, 60%)

            &.bar-color-8
              background lighten(dark-gray, 70%)

          .label
            color white
            float right
            font-size 12px
            line-height 20.5px
            padding 0px 4px
            position relative
            z-index 1

  .hover-label
    position absolute

    .content
      background-color white
      border 1px solid medium-gray
      border-radius 3px
      color medium-gray
      font 700 11px font-helvetica-neue
      left -50px
      max-width 200px
      padding 5px
      position absolute
      top -45px
      text-align center
      user-select text
      z-index 3

      .title
        border-bottom 1px solid light-gray
        padding-bottom 5px
        overflow hidden
        white-space nowrap

      .results
        align-items center
        display flex
        padding-top 5px
        height 15

        div
          line-height 15px
          padding 0 5px

        .count
          flex-grow 1

        .percent
          color light-gray
          flex-grow 1
          font-weight 600

  .sort-icon
    cursor pointer
    display inline-block
    height 100%
    width 36px
    &::before
      background-color light-gray
      content ''
      display inline-block
      height 100%
      margin 0 6px
      transition background-color 0.1s, opacity 0.1s
      width 22px
    &:hover::before
      background-color blue-300
    &.sort-selected::before
      background-color medium-gray
    &.sort-icon-label-asc::before
      mask url(../../../../assets/charts/sort-label-asc.svg) no-repeat center
    &.sort-icon-label-desc::before
      mask url(../../../../assets/charts/sort-label-desc.svg) no-repeat center
    &.sort-icon-value-asc::before
      mask url(../../../../assets/charts/sort-value-asc.svg) no-repeat center
    &.sort-icon-value-desc::before
      mask url(../../../../assets/charts/sort-value-desc.svg) no-repeat center
    &.sort-icon-unselected::before
      mask url(../../../../assets/charts/sort-value-desc.svg) no-repeat center
      opacity 0
