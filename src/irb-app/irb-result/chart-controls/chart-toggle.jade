ul.chart-toggle(class={
  'editing-charttype': chartToggle.editingType,
  'enabled': projectHasEvents,
})
  each chartType in $helpers.chartTypes()
    - const isEditingCurrentStyle = chartToggle.editingType === chartType
    - const selectedPlotStyle = $helpers.selectedPlotStyle(chartType)
    - const styleChoicesForChartType = $helpers.styleChoicesForChartType(chartType)
    li.chart-type(
      class={
        [chartType]: true,
        editing: isEditingCurrentStyle,
        disabled: $helpers.isChartTypeDisabled(chartType),
      }
    )
      .toggle-button
        button.label(
          class={
            [chartType]: true,
            [selectedPlotStyle]: true,
            selected: chartType == report.displayOptions.chartType,
          }
          on={
            click: () => $helpers.onStyleClick(chartType, selectedPlotStyle),
          }
        )
          svg-icon(attrs={icon: chartType})
          = $helpers.formattedChartName(chartType, selectedPlotStyle)
        if styleChoicesForChartType.length > 1
          button.dropdown(on={click: () => $helpers.onDropdownClick(chartType)})
            svg-icon(attrs={icon: 'caret-down'})
      mp-drop-menu(
        attrs={open: isEditingCurrentStyle}
        on={change: ev => $helpers.menuChange(ev, chartType)}
      )
        .chart-style.options(attrs={'slot-body': true})
          each plotStyle in styleChoicesForChartType
            button.button-option(
              class={
                [chartType]: true,
                [plotStyle]: true,
                selected: selectedPlotStyle == plotStyle,
              }
              on={
               click: () => $helpers.onStyleClick(chartType, plotStyle),
              }
            )
              - const iconPlotStyle = plotStyle === `standard` ? `` : `-${plotStyle}`;
              svg-icon(attrs={icon: chartType + iconPlotStyle})
              = $helpers.formattedChartName(chartType, plotStyle)
