@import "../../stylesheets/common"

header-button-transition-duration = 150ms

.insights-builder
  font-size 16px
  font-weight 500
  padding 26px 30px 30px 30px
  position relative
  z-index 1

  .query,
  .sections,
  .section-container,
  .builder-section,
  .clause-container,
  .clause-header,
  .clause-body
    display flex

  .query, .builder-section
    flex-wrap wrap

  .section-container, .clause-container
    flex-direction column
    justify-content flex-end

    &.remove-right-margin
      margin-right 0

  .clause-container, .builder-container
    margin-bottom 18px
    margin-right 12px

  .clause-container, .control-container, .add-control
    .search-icon-wrapper
      align-items center
      display flex
      height 100%
      justify-content center
      position absolute
      svg-icon-style(grey-700, size: 18px)
      top 0

  .clause-container
    position relative
    &:hover
      button.remove
        opacity 1

      button.reorder
        opacity 1
        // only transition on hover to avoid position jumping
        transition opacity header-button-transition-duration

      .clause-header.group
        max-width calc(100% - 15px)

        &.hasRightCaret
          max-width calc(100% - 25px)
          .reorder-right
            margin-left 5px
            margin-right -25px
            padding-right 4px

    button.remove
      background none
      border none
      color grey-300
      font-size 14px
      font-weight 600
      opacity 0
      padding 0
      position absolute
      right -5px
      top 0
      transition opacity header-button-transition-duration
      svg-icon-style(grey-700, grey-500, size: 18px)

      &.group
        top 3px

      &:hover
        color grey-700

  .clause-body > div
    margin-right 10px

    &:last-child
     margin-right 0px

  .clause-header
    align-items flex-end
    color grey-700
    font-size 11px
    font-weight 900
    height 18px
    line-height 12px
    margin-bottom 4px
    text-transform uppercase

    .header-label
      ellipsis()

    button.reorder
      background none
      border none
      opacity 0
      padding 0
      svg-icon-style(grey-700, grey-500, pos-top: 3px)

      &.reorder-left
        margin-left -16px // reorder button width
      &.reorder-right
        margin-left -16px

  .clause-language
    color grey-300
    line-height 36px

  .section.disabled
    opacity 0.3
    pointer-events none

  .reset-query
    cursor pointer
    position absolute
    right 20px
    top 20px
    svg-icon-style(grey-700, red-700)

  .drop-menu
    position relative
    top 6px

  .builder-error-caption
    color grey-700
    font-size 14px
    text-align center
    padding 5px 0

    &.error-title
      color grey-900
      font-size 16px
      font-weight 900

  .error-builder-button
    display flex
    justify-content center
    margin 20px 0
    text-transform uppercase

  /* Builder Jade Mixins */

  option-height = 30px

  // property-list
  .screen-list-container
    overflow auto

    ul.screen-options-list
      overflow visible

    .builder-label
      margin 20px 18px 0

    .builder-divider
      border-top 1px solid grey-150
      margin 0 10px

  ul.screen-options-list
    margin 0 10px
    flex 1 1 auto
    overflow auto
    .matches-search
      color mp-blue

    &:last-of-type
      border-bottom none

    & + ul.screen-options-list
      border-top 1px solid grey-150
      margin-top 2px
      padding-top 2px

  .builder-pane .screen-options-list li.list-option, li.list-option
    color grey-700
    align-items center
    border-radius 3px
    cursor pointer
    display flex
    font-size 12px
    font-weight 500
    height option-height
    justify-content flex-end
    line-height 12px

    &:first-child
      margin-top 10px

    &:last-child
      margin-bottom 10px

    &.list-option-upsell, $.list-option-alert
      .option-label
        color grey-500

      .upsell-icon
        margin-right 3px

    &.list-option-alert
      .upsell-icon
        svg-icon-style(blue-900)

    &.list-option-upsell
      .upsell-icon
        svg-icon-style(mp-purple)

    &.list-option-active
      background-color grey-100
      color mp-blue

      .option-icon
        svg-icon-style(mp-blue, pos-top: 1px)

      .option-secondary-action
        display flex

    &.list-empty
      font 500 12px font-helvetica-neue
      justify-content center
      pointer-events none

    .option-icon
        svg-icon-style(pos-top: 1px)

  // resource-type-control
  .resource-type-control
    flex-shrink 0
    position relative
    box-shadow 0 1px 0 0 grey-150, 0 1px 3px 0 rgba(156, 172, 187, 0.37)

    mp-toggle
      width 100%

    .svg-icon-wrapper
      position absolute
      top 9px

      &.alert
        svg-icon-style(blue-900)
      &.upsell
        svg-icon-style(mp-purple)

      // TODO @nojvek: This should be really part of mp-toggle with an icon attribute
      &.sources
        &.events
          right 191px
        &.people
          right 35px

      &.properties
        &.events
          right 129px
        &.people
          right 14px

  // screen-footer-button
  button.screen-footer
    background none
    border none
    border-top 1px solid grey-150
    color grey-500
    font-size 12px
    font-weight 500
    line-height 100%
    min-height 48px
    padding 0

  // screen-option
  .option-icon
    padding-left 5px
    svg-icon-style(grey-700)

  .option-label
    font-size 12px
    font-weight 500
    padding-left 8px
    ellipsis()
    flex 1 1
    .highlight-match
      color mp-blue

  li.list-option.list-option-selected
    .option-icon
      svg-icon-style(grey-900)
    .option-label
      color grey-900
      cursor default
      font-weight 900
    .caret-icon
      opacity 0
      svg-icon-style(mp-blue)

    &.list-option-active .caret-icon
      opacity 1

  // screen-title
  .screen-title
    align-items center
    box-shadow 0 1px 3px 0 rgba(156,172,187,0.37), 0 1px 0 0 #E5EAEF
    color grey-700
    display flex
    flex none
    font-size 11px
    font-weight 900
    height 48px
    position relative

    &.theme-lite
      box-shadow none
      border-bottom 1px solid grey-100

    .upsell-header
      border 1px solid grey-150
      border-radius 11px
      display flex
      margin-left 90px
      width 355px
      svg-icon-style(mp-purple)

      .upsell-text
        color grey-700
        font 500 11px font-helvetica-neue
        line-height 22px
        &.upgrade-link
          color mp-purple
          margin-left 2px
          text-decoration none
          &:hover
            opacity .7

    .title-button
      align-items center
      cursor pointer
      display flex
      height 100%
      justify-content center
      padding 0 10px
      position absolute
      svg-icon-style(grey-500, grey-700)
      top 0

      &.back-button
        left 0

      &.close-button
        right 0

    .title-label
      ellipsis()
      padding 0 30px
      text-align center
      text-transform uppercase
      width 100%

  // secondary-action-pill
  .option-secondary-action
    align-items center
    display none
    flex none
    padding 0 5px 0 10px
    margin-right 10px

    &.pill
      background-color #fff
      border-radius 40px
      color grey-500
      font-size 11px
      font-weight 900
      height 18px
      line-height 12px

      .secondary-label
        vertical-align middle

      .caret-icon
        svg-icon-style(grey-500, speed: 0s, pos-top: 1px)

      .small-caret
        right -2px
        top 0px

      &:hover, &.pill-active
        background-color mp-blue
        color #fff
        svg-icon-style(#fff, speed: 0s, pos-top: 1px)

  // small-caret-icon
  .small-caret
    height 18px
    position relative
    right 4px
    top 1px
    svg-icon-style(size: 16px)

  // pane-loader
  .loading-properties
    align-items center
    display flex
    height 80px
    justify-content center

    mp-spinner
      width 30px
      height 30px

.upsell-pane-content
  align-items center
  display flex
  flex-direction column
  justify-content center
  padding 55px 36px

  .upsell-image
    position relative
    svg-icon
      position absolute

    &.people
      svg-icon
        bottom 0
        right 0
      &.upsell #circle, &.alert #alert-shape
          stroke white
          stroke-width 2px

      bg-img('~assets/images/pricing-people.svg', 98px, 60px)

    &.events
      svg-icon
        right 0
        top 0
      bg-img('~assets/images/pricing-events.svg', 98px, 60px)

    &.alert
      svg-icon-style(blue-900, size: 28px)

    &.upsell
      svg-icon-style(mp-purple, size: 28px)

  .upsell-message
    display inline-block
    padding 20px 0
    text-align center

    .title
      color grey-900
      font-family proxima-nova
      font-size 18px
      font-weight 700
      padding-bottom 16px

    .upsell-text
      color grey-700
      font-size 14px
      font-weight 400
      line-height 18px

      &.upsell-link
        color blue-900
        cursor pointer
        font-weight 700
        text-decoration none
        &:hover
          border-bottom 1px mp-blue
          color mp-blue
