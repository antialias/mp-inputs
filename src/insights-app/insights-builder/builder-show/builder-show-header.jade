include ../../mixins.jade

- const hasProperty = $helpers.hasProperty()
- const isEvent = $helpers.isEvent()
- const hasEventProperty = isEvent && hasProperty
- const isRemovable = $helpers.isRemovable() || hasEventProperty
- const open = $helpers.isOpen()

.query-builder-show-header
  .visible-header-content
    .header-label
      if $helpers.isStaticHeader()
        | Show total
      else
        .header-word Show
        .active-math-header(on={click: $helpers.headerClicked})
          .header-word= $helpers.getCurrentMathChoice()
          svg-icon.math-caret(attrs={icon: 'caret-down'})
    if isRemovable
      button.remove(
        style={left: $helpers.buttonPositionStyle()}
        on={click: hasEventProperty ? ev => $helpers.removeProperty(ev) : ev => $helpers.removeClause(ev)}
      )
        svg-icon(attrs={icon: 'x'})
  .drop-menu
    mp-drop-menu(attrs={open})
      .new-pane-content(attrs={'slot-body': true})
        = $component.child(`builder-pane`, {attrs: {open}})
